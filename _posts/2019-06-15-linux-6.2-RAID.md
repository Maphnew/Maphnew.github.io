## 6.2 여러 개의 하드디스크를 하나처럼 사용하기

### 6.2.1 RAID의 정의와 개념
서버 컴퓨터의 저장 장치 대부분은 하드웨어 RAID 또는 소프트웨어 RAID 방식을 사용한다. 그럼 RAID가 무엇인지? 그리고 왜 필요한지를 파악하자.
RAID(Redundant Array of Inexpensive/Independent Disks)는 여러 개의 하드디스크를 하나의 하드디스크처럼 사용하는 방식이다. 비용을 절감하면서도 더 신뢰성을 높이며, 성능까지 향상시킬 수 있다.
RAID의 종류는 크게 하드웨어 RAID와 소프트웨어 RAID로 나눌 수 있다.

#### 하드웨어 RAID
하드웨어 제조업체에서 여러 개의 하드디스크를 연결한 장비를 만들어서 그 자체를 공급하는 것이다. 좀 더 안정적이고, 각 제조업체에서 기술 지원을 받을 수 있기에 많이 선호하는 방법이다.

#### 소프트웨어 RAID
고가 하드웨어 RAID의 대안으로, 하드디스크만 여러 개 있으면 운영체제에서 지원하는 방식으로 RAID를 구성하는 방법을 말한다. 하드웨어 RAID와 비교하면 신뢰성이나 속도 등이 떨어질 수 있지만, 아주 저렴한 비용으로 좀 더 안전하게 데이터를 저장할 수 있다는 점에서 적극 고려해볼 수 있는 방식이다.

### 6.2.2 RAID 레벨
RAID는 기본적으로 구성하는 방식에 따라 Linear RAID, RAID 0, RAID 1, RAID 2, RAID 3, RAID 4, RAID 5까지 일곱 가지로 분류할 수 있다. 실무에서 주로 사용되는 방식은 Linear RAID, RAID 0, RAID 1, RAID 5와 RAID 5의 변형인 RAID 6, 그리고 RAID 1과 0의 혼합인 RAID 1+0 등이다.

#### 단순 볼륨
하드디스크 하나를 볼륨 하나로 사용하는 방법, RAID 방식에는 포함되지 않는다.

#### Linear RAID와 RAID 0
두 방식 모두 최소 2개의 하드디스크가 필요하다. 2개 이상의 하드디스크를 1개의 볼륨으로 사용한다는 점은 비슷해 보인다. 하지만 가장 큰 차이점은 저장되는 방식에 있다.

Linear RAID 방식은 앞 하드디스크에 데이터가 완전히 저장된 후, 다음 하드디스크에 데이터를 저장한다. 이와 달리 RAID 0 방식은 모든 하드디스크를 동시에 사용한다. 이렇게 저장되는 경우 병렬로 처리되므로 속도가 더 빠르다. 이렇게 여러 개의 하드디스크에 동시에 저장되는 방식을 '스트리핑Stripping'방식이라고 부른다.

RAID 0 방식의 단점은 3개의 하드디스크 중 하나가 고장 날 경우 모든 데이터를 잃어버린다. 전혀 쓸모 없는 데이터가 되는 것이다. 그러므로 RAID 0 방식을 사용하는 데이터는 '빠른 성능을 요구하되, 혹시 전부 잃어버려도 큰 문제가 되지 않는 자료'를 저장하는 데 적절한 방식이라고 생각할 수 있겠다.

Linear RAID의 장점은 각 하드디스크의 용량이 달라도 전체 용량을 문제 없이 사용할 수 있어 공간 효율성이 100%라는 것이다. RAID 0이라면 100TB와 1TB 2개로 구성했을 때 사용할 수 있는 총 용량은 2TB밖에 되지 않는다.

#### RAID 1
RAID 1 방식의 핵심은 '미러링Mirroring'이라고 할 수 있겠다. 데이터를 저장하는 데 2배의 용량을 사용한다. 이 말은 결국 총 하드디스크 용량의 절반밖에 사용하지 못한다는 말과 같다.
하드디스크가 고장 나도 없어져서는 안 될 중요한 데이터가 있을 때 적당한 경우이다. 비용이 많이 들더라도 중요도가 높은 데이터들을 저장할 때 사용한다.저장 속도는 똑같은 데이터를 다른 하드디스크에 동시에 저장되는 것이므로 Linear RAID 방식과 속도가 같다.

#### RAID 5
RAID 1처럼 데이터의 안전성이 어느 정도 보장되면서 RAID 0처럼 공간 효율성도 좋은 방식이 RAID 5이다. 최소 3개 이상의 하드디스크가 있어야만 구성이 가능하며 대개는 5개 이상의 하드디스크로 구성한다. 오류가 발생하면 패리티Parity를 이용해서 데이터를 복구할 수 있다.

#### RAID 6
RAID 5방식의 개선으로, RAID 5는 1개의 패리티를 사용하지만 RAID 6는 2개의 패리티를 사용한다. 공간 효율은 RAID 5보다 약간 낮지만, 2개의 하드디스크가 동시에 고장 나도 데이터에는 이상이 없도록 한다.
최소 4개의 하드디스크로 구성해야 한다. 속도는 RAID 5에 비해 약간 떨어진다.

#### 그 외 RAID를 조합하는 방법
- RAID 1+0
Mirroring으로 구성한 데이터를 다시 Stripping 하는 방법. 신뢰성과 성능을 동시에 확보하는 방법이다.



